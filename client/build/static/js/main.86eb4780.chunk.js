(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(42),l=a.n(r),s=(a(49),a(3)),o=a(43),i=a.n(o),u=a(17),m=a.n(u);var b=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)({}),o=Object(s.a)(l,2),u=o[0],b=o[1],d=Object(n.useState)(),f=Object(s.a)(d,2),E=f[0],v=f[1],h=Object(n.useState)(!1),p=Object(s.a)(h,2),j=p[0],O=p[1],g=Object(n.useState)(""),N=Object(s.a)(g,2),y=N[0],S=N[1],k=Object(n.useState)(),w=Object(s.a)(k,2),C=w[0],x=w[1],D=Object(n.useState)(!1),I=Object(s.a)(D,2),A=I[0],M=I[1],P=Object(n.useState)(),R=Object(s.a)(P,2),U=R[0],V=R[1],F=Object(n.useRef)(),J=Object(n.useRef)(),Y=Object(n.useRef)();return Object(n.useEffect)((function(){Y.current=i.a.connect("https://share.ssebs.com"),Y.current.on("yourID",(function(e){r(e)})),Y.current.on("allUsers",(function(e){b(e)})),Y.current.on("hey",(function(e){O(!0),S(e.from),x(e.signal)}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",{className:"navbar navbar-dark bg-ssebs"},c.a.createElement("div",{className:"container"},c.a.createElement("span",{className:"navbar-brand mb-0 h1 px-3"},"ssebsShare"))),c.a.createElement("div",{className:"container"},c.a.createElement("h5",{className:"m-3"},"Choose a Video Source"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"cam"===U?navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){v(e),F.current.srcObject=e})).catch((function(){window.alert("Could not get camera")})):"screen"===U&&navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}).then((function(e){v(e),F.current.srcObject=e})).catch((function(){window.alert("Could not get screen share")}))},className:"form-inline my-3"},c.a.createElement("div",{className:"form-group"},c.a.createElement("select",{name:"source",onChange:function(e){return V(e.target.value)},value:U,className:"form-control mx-3"},c.a.createElement("option",{disabled:!0,selected:!0},"Source"),c.a.createElement("option",{value:"cam"},"Camera"),c.a.createElement("option",{value:"screen"},"Screen Share"))),c.a.createElement("button",{type:"submit",className:"btn btn-ssebs"},"Select")),c.a.createElement("hr",null),U&&E&&c.a.createElement("div",{className:"mx-3"},c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"half text-center"},c.a.createElement("strong",null,"Your Video:"),c.a.createElement("hr",null),E?c.a.createElement("video",{width:"500",playsInline:!0,muted:!0,ref:F,autoPlay:!0,className:"border-black"}):c.a.createElement("div",null,"You haven't selected a source")),c.a.createElement("div",{className:"half text-center"},c.a.createElement("strong",null,"Partner's Video:"),c.a.createElement("hr",null),A?c.a.createElement("video",{width:"500",playsInline:!0,ref:J,autoPlay:!0,controls:!0,className:"border-black"}):c.a.createElement("div",null,"Not in a call yet..."))),c.a.createElement("hr",null),c.a.createElement("div",null,c.a.createElement("p",null,"All people on the server:"),Object.keys(u).map((function(e){return e===a?null:c.a.createElement("button",{onClick:function(){return function(e){var t=new m.a({initiator:!0,trickle:!1,stream:E});t.on("signal",(function(t){Y.current.emit("callUser",{userToCall:e,signalData:t,from:a})})),t.on("stream",(function(e){J.current.srcObject=e})),Y.current.on("callAccepted",(function(e){M(!0),t.signal(e)}))}(e)},key:e,className:"btn btn-outline-primary"},"Call ",e)}))),c.a.createElement(c.a.Fragment,null,j&&c.a.createElement("div",null,c.a.createElement("hr",null),c.a.createElement("p",{className:"alert alert-primary",role:"alert"},y," is calling you"),c.a.createElement("button",{onClick:function(){M(!0);var e=new m.a({initiator:!1,trickle:!1,stream:E});e.on("signal",(function(e){Y.current.emit("acceptCall",{signal:e,to:y})})),e.on("stream",(function(e){J.current.srcObject=e})),e.signal(C)},className:"btn btn-ssebs"},"Accept"))))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root"))},44:function(e,t,a){e.exports=a(105)},49:function(e,t,a){},79:function(e,t){},95:function(e,t){},97:function(e,t){}},[[44,1,2]]]);
//# sourceMappingURL=main.86eb4780.chunk.js.map